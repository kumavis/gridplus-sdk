---
id: "client.Client"
title: "Class: Client"
sidebar_label: "Client"
custom_edit_url: null
---

[client](../modules/client).Client

Manages a Lattice device

## Constructors

### constructor

• **new Client**(`params`)

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `params` | `Object` | Parameters are passed as an object. |
| `params.baseUrl?` | `string` | [baseUrl](client.Client#baseurl) |
| `params.crypto` | `string` | [crypto](client.Client#crypto) |
| `params.key?` | `string` | [key](client.Client#key) |
| `params.name` | `string` | [name](client.Client#name) |
| `params.pairingSalt?` | `string` | [pairingSalt](client.Client#pairingsalt) |
| `params.privKey?` | `string` | [privKey](client.Client#privkey) |
| `params.retryCount?` | `number` | [retryCount](client.Client#retrycount) |
| `params.timeout?` | `number` | [timeout](client.Client#timeout) |

#### Defined in

[client.ts:86](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L86)

## Properties

### activeWallets

• **activeWallets**: `Object`

The Active [Wallet](../interfaces/types_wallet.Wallet)

#### Type declaration

| Name | Type |
| :------ | :------ |
| `external` | [`Wallet`](../interfaces/types_wallet.Wallet) |
| `internal` | [`Wallet`](../interfaces/types_wallet.Wallet) |

#### Defined in

[client.ts:68](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L68)

___

### baseUrl

• **baseUrl**: `string`

The base URL of the server.

#### Defined in

[client.ts:44](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L44)

___

### crypto

• **crypto**: `any`

The crypto library to use. Currently only 'secp256k1' is supported.

#### Defined in

[client.ts:46](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L46)

___

### deviceId

• **deviceId**: `string`

The ID of the Lattice to connect to.

#### Defined in

[client.ts:60](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L60)

___

### ephemeralPub

• **ephemeralPub**: `any`

Temporary secret that is generated by the Lattice device

#### Defined in

[client.ts:54](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L54)

___

### isPaired

• **isPaired**: `boolean`

Is the Lattice paired with this Client.

#### Defined in

[client.ts:62](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L62)

___

### key

• **key**: `any`

The public key of the client.

#### Defined in

[client.ts:52](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L52)

___

### name

• **name**: `string`

The name of the client.

#### Defined in

[client.ts:48](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L48)

___

### pairingSalt

• **pairingSalt**: `any`

A random string used to salt the pairing code.

#### Defined in

[client.ts:73](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L73)

___

### privKey

• **privKey**: `string`

The private key of the client.

#### Defined in

[client.ts:50](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L50)

___

### retryCount

• **retryCount**: `number`

Number of times to retry a request if it fails.

#### Defined in

[client.ts:64](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L64)

___

### sharedSecret

• **sharedSecret**: `string`

The shared secret of the client.

#### Defined in

[client.ts:56](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L56)

___

### timeout

• **timeout**: `number`

The time to wait for a response before cancelling.

#### Defined in

[client.ts:58](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L58)

## Lattice Methods

### addAbiDefs

▸ **addAbiDefs**(`defs`, `cb`, `nextCode?`): `any`

We take a list of ABI definitions, and send them to the device in chunks of up to MAX_ABI_DEFS.

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `defs` | `any` | `undefined` | An array of ABI definitions to add. |
| `cb` | `any` | `undefined` | The callback to call when the request is complete. |
| `nextCode` | `any` | `null` | If this is a follow-up request, we don't need to ask for user authorization |

#### Returns

`any`

The decrypted response.

#### Defined in

[client.ts:430](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L430)

___

### addKvRecords

▸ **addKvRecords**(`opts`, `cb`): `any`

The function takes in a set of key-value records and adds them to the Lattice.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `opts` | `any` | - |
| `cb` | `any` | (err, res) => { |

#### Returns

`any`

The response from the Lattice is a success or failure.

#### Defined in

[client.ts:625](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L625)

___

### addPermissionV0

▸ **addPermissionV0**(`opts`, `cb`): `any`

It takes in a currency, time window, spending limit, and decimals, and builds a payload to send
to the Lattice.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `opts` | `any` | An object containing the following properties: |
| `cb` | `any` | The callback function to be called when the request is complete. |

#### Returns

`any`

The callback is called with an error if there is one, otherwise it is called with no
arguments.

#### Defined in

[client.ts:472](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L472)

___

### connect

▸ **connect**(`deviceId`, `cb`): `any`

Attempts to contact a device based on its deviceId. The response should include an ephemeral
public key, which is used to pair with the device in a later request

#### Parameters

| Name | Type |
| :------ | :------ |
| `deviceId` | `any` |
| `cb` | `any` |

#### Returns

`any`

#### Defined in

[client.ts:143](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L143)

___

### getAddresses

▸ **getAddresses**(`opts`, `cb`): `any`

Get the addresses associated with the active wallet.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `opts` | `Object` | Options |
| `opts.n` | `UInt4` | TODO |
| `opts.startPath` | `number`[] | TODO |
| `cb` | `any` | callback function |

#### Returns

`any`

An array of addresses.

#### Defined in

[client.ts:256](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L256)

___

### getKvRecords

▸ **getKvRecords**(`opts`, `cb`): `any`

Get a list of key-value records from the Lattice.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `opts` | `any` | - |
| `cb` | `any` | callback function |

#### Returns

`any`

The response is a buffer

#### Defined in

[client.ts:538](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L538)

___

### pair

▸ **pair**(`pairingSecret`, `cb`): `any`

If a pairing secret is provided, we use it to sign a hash of the public key, name, and pairing
secret. We then send the name and signature to the device. If no pairing secret is provided, we
send a zero-length name buffer to the device.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `pairingSecret` | `any` | The pairing secret that was generated by the device. |
| `cb` | `any` | callback function |

#### Returns

`any`

The active wallet object.

#### Defined in

[client.ts:180](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L180)

___

### removeKvRecords

▸ **removeKvRecords**(`opts`, `cb`): `any`

Send a request to the Lattice to remove a set of KV records.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `opts` | `any` | - |
| `cb` | `any` | The callback function to be called when the request is complete. |

#### Returns

`any`

A callback with an error or null.

#### Defined in

[client.ts:722](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L722)

___

### sign

▸ **sign**(`opts`, `cb`, `cachedData?`, `nextCode?`): `any`

The function takes in the options for the transaction, and then calls the signReqResolver
function to build the request. It then checks if there are any extra payloads to be sent, and
if so, it recursively calls itself to send the next payload. If there are no more payloads, it
then calls the _handleSign function to handle the response.

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `opts` | `Object` | `undefined` | - |
| `opts.currency` | `any` | `undefined` | - |
| `opts.data` | `any` | `undefined` | - |
| `cb` | `any` | `undefined` | The callback function to call when the request is complete. |
| `cachedData` | `any` | `null` | This is the cached data from the previous request. If this is null, |
| `nextCode` | `any` | `null` | the next code to send to the device. This is only used if there are |

#### Returns

`any`

The response from the device.

#### Defined in

[client.ts:342](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L342)

___

### test

▸ **test**(`data`, `cb`): `any`

Test takes a testID and a payload, and sends them to the device.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `data` | `Object` |  |
| `data.payload` | `any` | TODO |
| `data.testID` | `number` | TODO |
| `cb` | (`a`: `any`, `b?`: `any`) => `any` | callback function |

#### Returns

`any`

The decrypted data.

#### Defined in

[client.ts:229](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L229)

___

## Other Methods

### fwVersion

▸ **fwVersion**(`fwVersion`): `void`

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `fwVersion` | `any` | The version of the firmware that is being uploaded. |

#### Returns

`void`

#### Defined in

[client.ts:324](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L324)

___

### getActiveWallet

▸ **getActiveWallet**(): [`Wallet`](../interfaces/types_wallet.Wallet)

Get the active wallet.

#### Returns

[`Wallet`](../interfaces/types_wallet.Wallet)

The active wallet.

#### Defined in

[client.ts:1304](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L1304)

___

### hasActiveWallet

▸ **hasActiveWallet**(): `boolean`

Check if the user has an active wallet

#### Returns

`boolean`

The active wallet.

#### Defined in

[client.ts:1318](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L1318)

___

### parseAbi

▸ **parseAbi**(`source`, `data`, `skipErrors?`): `any`

It takes a source and data as arguments, and returns the parsed ABI.

#### Parameters

| Name | Type | Default value | Description |
| :------ | :------ | :------ | :------ |
| `source` | `any` | `undefined` | The name of the source of the ABI data. |
| `data` | `any` | `undefined` | The data to parse. |
| `skipErrors` | `boolean` | `false` | - |

#### Returns

`any`

The parsed ABI.

#### Defined in

[client.ts:1352](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L1352)

___

### pubKeyBytes

▸ **pubKeyBytes**(`LE?`): `Buffer`

Get 64 bytes representing the public key
This is the uncompressed key without the leading 04 byte

#### Parameters

| Name | Type | Default value |
| :------ | :------ | :------ |
| `LE` | `boolean` | `false` |

#### Returns

`Buffer`

A Buffer containing the public key.

#### Defined in

[client.ts:1329](https://github.com/GridPlus/gridplus-sdk/blob/5ca4955/src/client.ts#L1329)
